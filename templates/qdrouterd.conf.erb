# GENERATED BY PUPPET
#
# Configuration file for qdrouterd.conf.
#
# See the qdrouterd.conf (5) manual page for information about this
# file's format and options.

container {
    worker-threads: <%= @qpid_dispatch_worker_threads %>
    container-name: <%= @qpid_dispatch_container_name %>
}

ssl-profile {
    name: <%= @qpid_dispatch_ssl_profile_name %>
<% if @qpid_dispatch_ssl_profile_use_cert_db == "true" -%>
    cert-db: <%= @qpid_dispatch_ssl_profile.cert_db %>
<% end -%>
<% if @qpid_dispatch_ssl_profile_use_cert_file == "true" -%>
    cert-file: <%= @qpid_dispatch_ssl_profile.cert_file %>
<% end -%>
<% if @qpid_dispatch_ssl_profile_use_key_file == "true"-%>
    key-file: <%= @qpid_dispatch_ssl_profile_key_file %>
<% end -%>
<% if @qpid_dispatch_ssl_profile_use_password == "true"-%>
    password: <%= @qpid_dispatch_ssl_profile_password %>
<% end -%>
<% if @qpid_dispatch_ssl_profile_use_password_file == "true" -%>
    password-file: <%= @qpid_dispatch_ssl_profile_password_file %>
<% end -%>
}
<% (1..@qpid_dispatch_listener_count.to_i).each do |which| -%>

listener {
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_address") -%>
  addr: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_address") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_port") -%>
  port: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_port") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_role") -%>
  role: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_role") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_sasl_mechanisms") -%>
  sasl-mechanisms: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_sasl_mechanisms") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_ssl_profile") -%>
  ssl-profile: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_ssl_profile") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_require_peer_auth") -%>
  require-peer-auth: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_require_peer_auth") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_trusted_certs") -%>
  trusted-certs: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_trusted_certs") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_listener_#{which}_allow_unsecured") -%>
  allow-unsecured: <%= scope.lookupvar("qpid_dispatch_listener_#{which}_allow_unsecured") %>
<% end -%>
}
<% end -%>
<% (1..@qpid_dispatch_connector_count.to_i).each do |which| -%>

connector {
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_label") -%>
  label: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_label") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_address") -%>
  addr: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_address") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_port") -%>
  port: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_port") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_role") -%>
  role: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_role") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_sasl_mechanisms") -%>
  sasl-mechanisms: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_sasl_mechanisms") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_ssl_profile") -%>
  ssl-profile: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_ssl_profile") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_require_peer_auth") -%>
  require-peer-auth: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_require_peer_auth") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_trusted_certs") -%>
  trusted-certs: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_trusted_certs") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_connector_#{which}_allow_unsecured") -%>
  allow-unsecured: <%= scope.lookupvar("qpid_dispatch_connector_#{which}_allow_unsecured") %>
<% end -%>
}
<% end -%>
<% (1..@qpid_dispatch_fixed_address_count.to_i).each do |which| -%>

fixed_address {
<% if scope.lookupvar("qpid_dispatch_fixed_address_#{which}_prefix") -%>
  prefix: <%= scope.lookupvar("qpid_dispatch_fixed_address_#{which}_prefix") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_fixed_address_#{which}_fanout") -%>
  fanout: <%= scope.lookupvar("qpid_dispatch_fixed_address_#{which}_fanout") %>
<% end -%>
<% if scope.lookupvar("qpid_dispatch_fixed_address_#{which}_bias") -%>
  bias: <%= scope.lookupvar("qpid_dispatch_fixed_address_#{which}_bias") %>
<% end -%>
}
<% end -%>

router {
    mode: <%= @qpid_dispatch_router_mode %>
    router-id: <%= @qpid_dispatch_router_id %>
}
